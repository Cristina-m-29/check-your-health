<div class="flex height-full">
    <div class="width-medium margin_right-xl">
        <div class="card appointments-card margin_bottom-xl">
            <span class="title">Programari noi</span>

            <div class="appointments-list" *ngIf="(futureAppointments$ | async) as a">
                <div class="appointment" *ngFor="let appointment of a" (click)="openAppointmentDetails(appointment, 'new')">
                  <span class="subtitle">
                    {{appointment.date * 1000 | date: 'dd MMM yyyy'}} /
                    {{appointment.hoursInterval.start | formatTime}} - {{appointment.hoursInterval.end | formatTime}} /
                    <span class="subtitle-purple">{{appointment?.fullPacient?.name}}</span>
                  </span>

                  <span class="small-subtitle pending" *ngIf="appointment.status === 'pending'">Așteaptă confirmare</span>
                  <span class="small-subtitle accepted" *ngIf="appointment.status === 'accepted'">Confirmată</span>
                  <span class="small-subtitle refused" *ngIf="appointment.status === 'refused'">Respinsă</span>
                </div>

                <span *ngIf="a.length === 0" class="small-subtitle">Nu există programări noi</span>

                <button
                  mat-raised-button
                  color="primary"
                  class="width-full height-small button"
                  (click)="addAppointment()"
                >
                  Adauga programare
                </button>
            </div>
        </div>

        <div class="card appointments-card flex_column flex_column-justify">
            <span class="title">Programări viitoare</span>

            <div class="appointments-list" *ngIf="(futureMarkedAppointments$ | async) as a">
                <div class="appointment" *ngFor="let appointment of a" (click)="openAppointmentDetails(appointment, 'marked')">
                    <span class="small-subtitle margin">Data</span>

                    <span class="subtitle block margin_bottom-s">
                      {{appointment.date * 1000 | date: 'dd MMM yyyy'}} /
                      {{appointment.hoursInterval.start | formatTime}} - {{appointment.hoursInterval.end | formatTime}}
                    </span>

                    <span class="small-subtitle margin">Nume pacient</span>

                    <span class="subtitle block margin_bottom-s">{{appointment?.fullPacient?.name}}</span>

                    <span class="small-subtitle">Motiv</span>

                    <span class="subtitle block margin_bottom-s">{{appointment.reason}}</span>

                    <span class="small-subtitle block">Status</span>

                    <span class="small-subtitle pending" *ngIf="appointment.status === 'pending'">Așteaptă confirmare</span>
                    <span class="small-subtitle accepted" *ngIf="appointment.status === 'accepted'">Confirmată</span>
                    <span class="small-subtitle refused" *ngIf="appointment.status === 'refused'">Respinsă</span>
                </div>

                <span *ngIf="a.length === 0" class="small-subtitle">Nu există programări viitoare</span>
            </div>
        </div>
    </div>

    <div class="width-medium card old-appointments-card">
        <span class="title">Istoric programări</span>

        <div class="old-appointments-container" *ngIf="(oldAppointments$ | async) as a">

            <div class="old-appointment" *ngFor="let appointment of a" (click)="openAppointmentDetails(appointment, 'old')">
                <span class="subtitle">
                  {{appointment.date * 1000 | date: 'dd MMM yyyy'}} /
                  {{appointment.hoursInterval.start | formatTime}} - {{appointment.hoursInterval.end | formatTime}} /
                <span class="subtitle-purple">
                  {{appointment?.fullPacient?.name}}
                </span>
                </span>

                <span class="small-subtitle" *ngIf="appointment.status === 'pending'">Așteaptă confirmare</span>
                <span class="small-subtitle" *ngIf="appointment.status === 'accepted'">Confirmată</span>
                <span class="small-subtitle" *ngIf="appointment.status === 'refused'">Respinsă</span>
            </div>

            <span *ngIf="a.length === 0" class="small-subtitle">Istoricul programărilor este gol</span>
        </div>
    </div>
</div>
