<div 
  class="card card-hover-effect appointments-card flex_column flex_column-justify margin_bottom-xl"
  [ngClass]="{'card-not-selected': !selected, 'card-selected': selected}"
>
  <span class="title card-title">Trimiterea nr. {{reference.id.slice(-5)}}</span>
  
  <span class="small-subtitle">Creată de medicul</span>

  <span class="subtitle block margin_bottom">{{medic.name}}</span>

  <span class="small-subtitle">Către medicul</span>

  <span class="subtitle block margin_bottom">{{specialist.name}}</span>

  <span class="small-subtitle">Motiv</span>

  <span class="subtitle block margin_bottom">{{reference.details}}</span>

  <ng-container *ngIf="reference.feedback">
    <span class="small-subtitle">Concluzii în urma consultului</span>

    <span class="subtitle block margin_bottom">{{reference.feedback}}</span>
  </ng-container>

  <ng-container *ngIf="reference.canCreateAppointment; else viewOnly">
    <ng-container *ngIf="appointment; else createAppointment">
      <span class="subtitle block margin_bottom">Programare refuzată</span>

      <button 
        mat-raised-button 
        class="max-width-medium"
        color="primary"
        *ngIf="reference.canCreateAppointment"
        (click)="goToCreateAppointment()"
      >
        Reprogramează
      </button>
    </ng-container>

    <ng-template #createAppointment>
      <button 
        mat-raised-button 
        class="max-width-medium" 
        color="primary"
        *ngIf="reference.canCreateAppointment"
        (click)="goToCreateAppointment()"
      >
        Crează programare
      </button>
    </ng-template>
  </ng-container>

  <ng-template #viewOnly>
    <button 
      mat-raised-button 
      class="max-width-medium"
      (click)="viewAppointment()"
    >
      Vezi programare
    </button>
  </ng-template>
</div>